<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SciText Digitizer (SVG)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = "https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js";
  </script>
</head>
<body>
  <canvas id="processing-canvas" style="display:none;"></canvas>

  <!-- LOAD SINGLE APPLICATION BUNDLE -->
<script type="module">
  let app;

  import('./src/app.js')
    .catch(err => {
      console.log('Local failed:', err);
      return import('https://lsparrish.github.io/sciconvert/src/app.js');
    })
    .then(module => {
      app = module.default || module;
      window.app = app;
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => app.bootstrap?.());
      } else {
        app.bootstrap?.();
      }
    })
    .catch(err => console.error('Both imports failed:', err));
</script>

  <!-- UI INITIALIZATION -->
  <script>
    // Developer Note:
    // To add custom UI extensions without modifying app.js, use the window.app.insertElementBefore API.
    // Example:
    // window.app.insertElementBefore('<button>My Button</button>', '#some-selector', (el) => { ... });
  </script>
</body>
</html>
